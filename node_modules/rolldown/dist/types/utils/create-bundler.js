import { Bundler } from '../binding';
import { createBundlerOptions } from './create-bundler-option';
export async function createBundler(inputOptions, outputOptions) {
    const option = await createBundlerOptions(inputOptions, outputOptions);
    try {
        return {
            bundler: new Bundler(option.bundlerOptions),
            stopWorkers: option.stopWorkers,
        };
    }
    catch (e) {
        await option.stopWorkers?.();
        throw e;
    }
}
